<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>AHG</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="main.css">
        <style class="titleShadow">
            .slide h1 {
                text-shadow: 5px 5px rgba(0,0,0,.2),
                            -5px -5px rgba(0,0,0,.2),
                            -5px 5px rgba(0,0,0,.2);
            }
        </style>
    </head>
    <body>
        <div class="slider">
            <ul class="slideCounter">
                <li class="link goToA active_link">
                    <a onclick="linkChange(0)">
                        <span></span>
                    </a>
                </li>
                <li class="link goToH inactive_link">
                    <a onclick="linkChange(1)">
                        <span></span>
                    </a>
                </li>
                <li class="link goToG inactive_link">
                    <a onclick="linkChange(2)">
                        <span></span>
                    </a>
                </li>
            </ul>
            <div class="slide adrian active_slide" id="adrian">
                <h1>Adrian</h1>
            </div>
            <div class="slide hugo inactive_slide_bottom" id="hugo">
                <h1>Hugo</h1>
            </div>
            <div class="slide gomes inactive_slide_bottom" id="gomes">
                <h1>Gomes</h1>
            </div>
        </div>
        <canvas></canvas>
        <footer>
            <a class="github" href="https://github.com/ahgomes/ahgomes.github.io" target="_blank">
                <svg aria-hidden="true" version="1.1" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
            </a>
        </footer>
        <script type="text/javascript">
            var pages;
            var page;
            var links;
            var sliding;
            var title;

            window.onload = function() {
                pages = ['.adrian', '.hugo', '.gomes'];
                links = ['.goToA', '.goToH', '.goToG'];
                page = 0;
                sliding = false;
            };

            class FixedLengthQueue {
                constructor(maxLength) {
                    this.maxLength = maxLength;
                    this._elements = new Array(this.maxLength);
                }

                enqueue(el) {
                    this._elements.push(el);
                    return this._elements.shift();
                }

                dequeue() {
                    this._elements.push(null);
                    return this._elements.shift();
                }

                toList() {
                    return this._elements;
                }

                static fromList(list) {
                    var flqueue = new FixedLengthQueue(list.length);
                    for (let i = 0; i < list.length; i++) {
                        flqueue.enqueue(list[i]);
                    }
                    return flqueue;
                }
            }

            function linkChange(i) {
                if (!sliding) {
                    sliding = true;
                    changeSlide(i, (page < i), Math.abs(page - i));
                    page = i;
                }
            }

            window.onwheel = function(e) {
                if (e.deltaY < -40 && page > 0 && !sliding) {
                    page--;
                    sliding = true;
                    changeSlide(page, false, 1);
                }
                if (e.deltaY > 40 && page < 2 && !sliding) {
                    page++;
                    sliding = true;
                    changeSlide(page, true, 1);
                }
            };

            function changeSlide(p, down, dist) {
                if(dist != 0) {
                    if(dist > 1) {
                        p += (down) ? -1 : 1;
                        page = p;
                    }

                    var nextPage = document.querySelector(pages[p]);
                    nextPage.classList.add('active_slide');
                    nextPage.classList.remove((down) ? 'inactive_slide_bottom' : 'inactive_slide_top');

                    var currentPage = document.querySelector(pages[(down) ? p - 1 : p + 1]);
                    currentPage.classList.remove('active_slide');
                    currentPage.classList.add((down) ? 'inactive_slide_top' : 'inactive_slide_bottom');

                    var nextLink = document.querySelector(links[p]);
                    nextLink.classList.add('active_link');
                    nextLink.classList.remove('inactive_link');

                    var currentLink = document.querySelector(links[(down) ? p - 1 : p + 1]);
                    currentLink.classList.remove('active_link');
                    currentLink.classList.add('inactive_link');

                    if(dist > 1) {
                        page += (down) ? 1 : -1;
                        changeSlide(page, down, 1);
                    }
                }

                setTimeout(function() {
                    sliding = false;
                }, 500);
            }

            var mouse = {
            	x: innerWidth / 2,
            	y: innerHeight / 2,
                xShift: 0,
                yShift: 0,
                xMult: 10,
                yMult: 10
            };

            window.onmousemove = function(e) {
                document.querySelector('.titleShadow').remove();
                var css = document.createElement('style');
                css.classList.add('titleShadow');

            	mouse.x = e.clientX;
            	mouse.y = e.clientY;

                mouse.xShift = ((innerWidth / 2) - mouse.x) / 100;
                mouse.yShift = ((innerHeight / 2) - mouse.y) / 100;

                mouse.xMult = (mouse.xShift < 0) ? 10 : -10;
                mouse.yMult = (mouse.yShift < 0) ? 10 : -10;

                if(Math.abs(mouse.xShift) <= 5 && Math.abs(mouse.yShift) <= 5) {
                    css.innerHTML =
                        '.slider h1 {' +
                            'text-shadow: ' +
                                mouse.xShift + 'px ' + mouse.yShift + 'px rgba(0,0,0,.2),' +
                                (mouse.xShift - mouse.xMult) + 'px ' + (mouse.yShift - mouse.yMult) + 'px rgba(0,0,0,.2),' +
                                (mouse.xShift - mouse.xMult) + 'px ' + mouse.yShift + 'px rgba(0,0,0,.2);' +
                            '}';
                } else {
                    mouse.xShift = (mouse.xShift <= -5) ? -5 : (mouse.xShift >= 5) ? 5 : mouse.xShift;
                    mouse.yShift = (mouse.yShift <= -5) ? -5 : (mouse.yShift >= 5) ? 5 : mouse.yShift;
                    css.innerHTML =
                        '.slider h1 {' +
                            'text-shadow: ' +
                                mouse.xShift + 'px ' + mouse.yShift + 'px rgba(0,0,0,.2),' +
                                (mouse.xShift - mouse.xMult) + 'px ' + (mouse.yShift - mouse.yMult) + 'px rgba(0,0,0,.2),' +
                                (mouse.xShift - mouse.xMult) + 'px ' + mouse.yShift + 'px rgba(0,0,0,.2);' +
                            '}';
                }

                document.querySelector('head').appendChild(css);
            };

            function key(e) {
                return e.which || e.keyCode;
            }

            var flip = 0;
            var body = document.querySelector('body');
            var password = 'cvhdrtfy';
            var passwordQueue = new FixedLengthQueue(password.length);

            window.onkeydown = function(e) {
                switch (key(e)) {
                    case 33:
                    case 34:
                    case 38:
                    case 40:
                        e.preventDefault();
                        if(key(e) == 38 && page > 0 && !sliding) {
                            page--;
                            sliding = true;
                            changeSlide(page, false, 1);
                        } else if(key(e) == 40 && page < 2 && !sliding) {
                            page++;
                            sliding = true;
                            changeSlide(page, true, 1);
                        }
                        break;
                }
            }

            window.onkeypress = function(e) {
                switch (key(e)) {
                    case 97:
                        linkChange(0);
                        break;
                    case 103:
                        linkChange(2);
                        break;
                    case 104:
                        linkChange(1);
                        break;
                    case 102:
                        flipScreen();
                        break;
                }
                passwordQueue.enqueue(String.fromCharCode(key(e)));
                console.log(passwordQueue.toList().join(''));
                if(passwordQueue.toList().join('') == password) {
                    alert('HI');
                }
            }

            function flipScreen() {
                if(flip == 0) {
                    body.style.filter = 'hue-rotate(90deg) invert(1)';
                    body.style.transform = 'scale(-1, 1)';
                    flip++;
                } else if(flip == 1) {
                    body.style.filter = 'hue-rotate(180deg) invert(0)';
                    body.style.transform = 'scale(-1, -1)';
                    flip++;
                } else if(flip == 2) {
                    body.style.filter = 'hue-rotate(270deg) invert(1)';
                    body.style.transform = 'scale(1, -1)';
                    flip++;
                } else {
                    body.style.filter = 'unset';
                    body.style.transform = 'scale(1, 1)';
                    flip = 0;
                }
            }

        </script>
        <script src="canvas.js" charset="utf-8"></script>
    </body>
</html>
